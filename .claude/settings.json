{
  "$schema": "https://raw.githubusercontent.com/anthropics/claude-code/main/schemas/settings.schema.json",

  "permissions": {
    "allow": [
      "Bash(npm run *)",
      "Bash(npx *)",
      "Bash(git *)",
      "Bash(ls *)",
      "Read(**/*)",
      "Write(components/**)",
      "Write(services/**)",
      "Write(*.ts)",
      "Write(*.tsx)"
    ],
    "deny": [
      "Bash(rm -rf *)",
      "Write(.env*)"
    ]
  },

  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-filesystem", "/Users/luffy/technova"],
      "description": "读写项目文件，所有 Agent 共用"
    },

    "puppeteer": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-puppeteer"],
      "description": "浏览器自动化，用于 UI 预览和 Lighthouse 测试"
    },

    "memory": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-memory"],
      "description": "跨会话记忆，保存 Agent 决策和上下文"
    },

    "brave-search": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-brave-search"],
      "env": {
        "BRAVE_API_KEY": "${BRAVE_API_KEY}"
      },
      "description": "网络搜索，用于竞品调研和文档查询"
    },

    "github": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-github"],
      "env": {
        "GITHUB_TOKEN": "${GITHUB_TOKEN}"
      },
      "description": "GitHub 操作，用于 PR 和 Issue 管理"
    },

    "fetch": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-fetch"],
      "description": "HTTP 请求，用于抓取参考网站"
    },

    "sequential-thinking": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-sequential-thinking"],
      "description": "复杂问题分解，用于架构决策"
    }
  },

  "context": {
    "include": [
      "AGENTS.md",
      "CONTEXT.md",
      "PRODUCT.md",
      "types.ts",
      "constants.ts",
      "agents/*.md"
    ],
    "exclude": [
      "node_modules/**",
      "dist/**",
      ".git/**"
    ]
  },

  "agents": {
    "directory": "./agents",
    "orchestrator": "orchestrator",
    "workflow": [
      "product-strategist",
      "frontend-architect",
      ["ui-design-engineer", "tech-copywriter"],
      "claude-code-engineer",
      "qa-reviewer",
      "seo-performance"
    ],
    "descriptions": {
      "orchestrator": "总控调度 - 端到端交付、协调所有 Agent",
      "frontend-architect": "前端架构师 - 组件结构、技术决策",
      "ui-design-engineer": "UI设计师 - Tailwind样式、响应式",
      "tech-copywriter": "文案专家 - 多语言文案、CTA",
      "product-strategist": "产品策略 - 需求分析、优先级",
      "claude-code-engineer": "代码工程师 - 实现代码",
      "qa-reviewer": "质量审查 - 代码审查、安全检查",
      "seo-performance": "SEO性能 - Lighthouse、优化"
    }
  }
}
